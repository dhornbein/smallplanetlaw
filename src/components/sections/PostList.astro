---
/**
 * PostList - Renders a list of blog post excerpts.
 * Accepts an array of blog collection entries and renders PostExcerpt for each.
 */
import PostExcerpt from "../ui/PostExcerpt.astro";

interface BlogEntry {
  id: string;
  data: {
    title: string;
    summary: string;
    date: Date;
    pinned?: boolean;
    tags?: string[];
  };
}

interface Props {
  posts: BlogEntry[];
}

const { posts } = Astro.props;

// Sort: pinned first, then by date descending
const sorted = [...posts].sort((a, b) => {
  if (a.data.pinned && !b.data.pinned) return -1;
  if (!a.data.pinned && b.data.pinned) return 1;
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
---

<div class="post-list flex flex-wrap gap-6 sm:gap-8 px-6 md:px-16 justify-center">
  {
    sorted.map((post) => (
      <PostExcerpt
        title={post.data.title}
        summary={post.data.summary}
        date={post.data.date}
        slug={post.id}
        tags={post.data.tags}
        pinned={post.data.pinned}
      />
    ))
  }
</div>
